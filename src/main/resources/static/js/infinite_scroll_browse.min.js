var orderBy=$("#orderBy").val(),orderDirection=$("#orderDirection").val(),currentPage=1,maxPage;function getSonnets(a){$.ajax({url:"/sonnets/all/paged?page="+currentPage+"&size=20&sort="+orderBy+","+orderDirection,method:"GET",dataType:"json",success:function(b){a(b)}})}getSonnets(function(a){maxPage=a.totalPages;for(var b in a.content)createCard(a.content[b])});
function createCard(a){var b=document.getElementById("card-container"),c="",d;for(d in a.text)c+="\n<li>"+a.text[d]+"</li>";b.innerHTML+='<div class="card border-light mb-2" style="max-width: 24rem; min-width: 20rem;">\n<h5 class="card-header">'+a.title+'</h5>\n<div class="card-body">\n <h5 class="card-title">'+a.firstName+" "+a.lastName+'</h5>\n <ul class="list-unstyled">'+c+'\n </ul>\n</div>\n <ul class="list-group list-group-flush">\n  <li class="list-group-item"><strong>Year of publication:</strong> '+
a.publicationYear+'</li>\n  <li class="list-group-item"><strong>Period of publication:</strong> '+a.period+'</li>\n  <li class="list-group-item"><strong>Source:</strong> '+a.sourceDesc+'</li>\n  <li class="list-group-item"><strong>Rights:</strong> '+a.publicationStmt+'</li>\n  <li class="list-group-item">\n   <a href="/sonnets/xml/by_id/'+a.id+'" target="_blank" class="card-link">XML</a>\n   <a href="/sonnets/by_id/'+a.id+'" target="_blank" class="card-link">JSON</a>\n   <a href="/sonnets/tei/by_id/'+
a.id+'" target="_blank" class="card-link">TEI</a>\n   <a href="/sonnets/txt/by_id/'+a.id+'" target="_blank" class="card-link">TXT</a>\n   </li>\n  </ul>\n</div>'}$("#orderBy").on("change",function(){orderBy=$("#orderBy").val();currentPage=1;$("#card-container").empty();getSonnets(function(a){for(var b in a.content)createCard(a.content[b])})});$("#orderDirection").on("change",function(){orderDirection=$("#orderDirection").val();currentPage=1;$("#card-container").empty();getSonnets(function(a){for(var b in a.content)createCard(a.content[b])})});
$(window).scroll(function(){var a=$(window).scrollTop(),b=$(document).height();a>b-2160&&(currentPage+=1,currentPage<maxPage?(getSonnets(function(a){for(var b in a.content)createCard(a.content[b])}),sleep(100)):document.getElementById("card-container").innerHTML+='<p class="lead" style="text-align: center;">End of Results</p>')});
$(document).ready(function(){$(window).scroll(function(){100<$(this).scrollTop()?$("#scroll").fadeIn():$("#scroll").fadeOut()});$("#scroll").click(function(){$("html, body").animate({scrollTop:0},600);return!1})});function sleep(a){for(var b=(new Date).getTime(),c=0;1E7>c&&!((new Date).getTime()-b>a);c++);};
