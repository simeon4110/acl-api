<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml" lang="en">
<head>
    <title>Sonnet - Review Records</title>
    <div th:replace="fragments/header :: head"></div>
</head>
<main>
    <div th:replace="fragments/header :: nav-bar"></div>
    <div class="container-fluid">
        <div class="row justify-content-center">
            <div class="col-lg-11">
                <h1 class="display-4 pb-3">Review all Records:</h1>
                <hr class="m-4" style="border-color: black"/>
            </div>
        </div>
    </div>
    <div class="row justify-content-center mb-3">
        <div class="col-lg-10">
            <ul class="nav nav-tabs">
                <li class="nav-item">
                    <a class="nav-link" th:href="@{~/admin}">Add User</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:href="@{~/admin/user/modify}">Modify User</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" th:href="@{~/admin/sonnets/all}">Review Records</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row justify-content-center">
            <div class="col-lg-10 mb-3">
                <div th:if="${param.success}" class="alert alert-success">
                    Sonnet deleted successfully.
                </div>
                <div th:if="${param.invalidId}" class="alert alert-danger">
                    Invalid sonnet id.
                </div>
                <div th:if="${param.doesNotExist}" class="alert alert-danger">
                    Sonnet does not exist.
                </div>
                <table id="sonnets" class="table table-striped table-bordered" cellspacing="0" width="100%">
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>Action</th>
                        <th>Added / Verified By</th>
                        <th>Author Last Name</th>
                        <th>Author First Name</th>
                        <th>Sonnet Title</th>
                    </tr>
                    </thead>
                </table>
            </div>
        </div>
    </div>
    <div th:replace="fragments/footer :: footer"></div>
    <div th:replace="fragments/footer :: scripts"></div>
    <script>
        $(document).ready(function () {
            var table = $('#sonnets').DataTable({
                'ajax': {
                    'url': '/sonnets/all',
                    'dataSrc': ''
                },
                "columns": [
                    {"mData": "id"},
                    {
                        "mData": "id",
                        "fnCreatedCell": function (nTd, sData, oData, iRow, iCol) {
                            $(nTd).html("<p><a href='/admin/sonnets/all/delete/" + oData.id + "'>delete</a> / " +
                                "<a href='/edit/" + oData.id + "'>edit</a></p>");
                        }
                    },
                    {"mData": "addedBy"},
                    {"mData": "lastName"},
                    {"mData": "firstName"},
                    {"mData": "title"}
                ]
            });
        });
    </script>
</main>
</html>